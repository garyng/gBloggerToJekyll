<h1 align="center">【何时用Submodule？】</h1>比如说你有一个Git repo （repository ，下同）叫做web-project<br />
然后你的web-project 需要用到另一个git repo 叫做 web-plugin<br />
git 的 submodule 就能管理你的 子-repo ，也就是在 web-project 内clone web-plugin ，然后你能管理、维护，就像操作普通git repo一样<br />
<br />
可是git submodule 有点..<br />
反正就是不太被大众欢迎，原因有很多.. （Google 下就有了）<br />
<br />
然后就有了 git subtree<br />
<br />
<blockquote class="bq_warning">注：本文章需要先了解Git</blockquote><h1 align="center">【使用Git Subtree】</h1>很简单<br />
现在有一个local repo ，名叫 subtreetest<br />
有一个文件叫做 readme.md<br />
和一个commit history<br />
<a href="http://lh4.ggpht.com/-kMQ_swmldYA/Un3u9EemtnI/AAAAAAAAFY4/o959LWEVvqA/s1600-h/image%25255B2%25255D.png"><img alt="image" border="0" height="388" src="http://lh5.ggpht.com/-nnG2u0Yx3Hs/Un3u91SItoI/AAAAAAAAFZA/u1cHiwZCqAI/image_thumb.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
还有另一个repo<br />
叫做 testing<br />
（我把它push 到github 上了 - <a href="https://github.com/garyng/testing">https://github.com/garyng/testing</a>）<br />
<a href="http://lh5.ggpht.com/-WHNp23xnQK0/Un3u-jBJD3I/AAAAAAAAFZI/bznmpOMepKI/s1600-h/image%25255B5%25255D.png"><img alt="image" border="0" height="388" src="http://lh6.ggpht.com/-DfOnYZbjR_0/Un3u_cpzrPI/AAAAAAAAFZQ/e35Ft8Lhn6M/image_thumb%25255B1%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
<h2>【添加子repo】</h2>现在我要在我的subtreetest 的 repo 内引用 testing 这个repo<br />
运行<br />
git subtree add --prefix=testing <a href="https://github.com/garyng/testing.git">https://github.com/garyng/testing.git</a> master –squash<br />
会看到这个：<br />
<a href="http://lh6.ggpht.com/-kLrpjz_1h60/Un3u_-0NOeI/AAAAAAAAFZY/dB1aAnlxpWQ/s1600-h/image%25255B8%25255D.png"><img alt="image" border="0" height="388" src="http://lh3.ggpht.com/-ySvaomsG9D8/Un3vAr6nVmI/AAAAAAAAFZg/3qhxRiU5BaM/image_thumb%25255B2%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
其中的<br />
<blockquote>--prefix 就是子目录的名称<br />
--squash 代表将子repo的所有commit都挤成一个commit</blockquote>现在subtreetest这个repo的目录已经变成了：<br />
<a href="http://lh3.ggpht.com/-pBr6IC6CKA8/Un3vBLfFEtI/AAAAAAAAFZo/i7oGHjycouE/s1600-h/image%25255B11%25255D.png"><img alt="image" border="0" height="388" src="http://lh3.ggpht.com/-GCfjBfvE-tE/Un3vB1kmFXI/AAAAAAAAFZw/zN2CCyBNq20/image_thumb%25255B3%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
testing 目录下：<br />
<a href="http://lh5.ggpht.com/-WlkJWts6w5o/Un3vCWtyy7I/AAAAAAAAFZ4/chqPZ1TDG0k/s1600-h/image%25255B14%25255D.png"><img alt="image" border="0" height="388" src="http://lh5.ggpht.com/-Ea9ROVQPYrg/Un3vDKeTsMI/AAAAAAAAFZ8/st5RJLTQcvA/image_thumb%25255B4%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
<h2>【pull下子repo的更新】</h2>到testing 这个repo 做几个edits<br />
然后在push<br />
<a href="http://lh5.ggpht.com/-aTnERCqQYLw/Un3vD4A4IiI/AAAAAAAAFaI/lSiwJlF12WY/s1600-h/image%25255B17%25255D.png"><img alt="image" border="0" height="764" src="http://lh3.ggpht.com/-SzzY6TjGCp4/Un3vEdsgaLI/AAAAAAAAFaQ/prbjiPxOsi0/image_thumb%25255B5%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="653" /></a> <br />
<br />
现在 testing 已经更新了<br />
如果到subtreetest 跟新它的子repo (testing)，像这样：<br />
git subtree pull --prefix=testing <a href="https://github.com/garyng/testing.git" title="https://github.com/garyng/testing.git">https://github.com/garyng/testing.git</a> master --squash<br />
<a href="http://lh3.ggpht.com/-AX-queSFZig/Un3vFEV9LbI/AAAAAAAAFaY/LYJSkVvLWUI/s1600-h/image%25255B20%25255D.png"><img alt="image" border="0" height="388" src="http://lh5.ggpht.com/-LouAChkFe84/Un3vF8SkoDI/AAAAAAAAFag/SPnu2WVMGPY/image_thumb%25255B6%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
然后commit history 就变成了<br />
<a href="http://lh6.ggpht.com/-TTmUsO3sZnQ/Un3vGlIWpsI/AAAAAAAAFao/QLMewNmclgw/s1600-h/image%25255B26%25255D.png"><img alt="image" border="0" height="388" src="http://lh3.ggpht.com/-H0ZkUEFCJJE/Un3vHBsN69I/AAAAAAAAFaw/LqDLtOz_2xY/image_thumb%25255B8%25255D.png?imgmax=800" style="border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
<h2>【用remote name 减少命令输入量】</h2>有没有发现到需要输入的命令都很长？<br />
现在将testing 的 pull/push URL 加入remote：<br />
git remote add testing <a href="https://github.com/garyng/testing.git">https://github.com/garyng/testing.git</a><br />
<a href="http://lh5.ggpht.com/-jad45B3fdNA/Un3vH1xcQEI/AAAAAAAAFa4/mSq1Frh9Zt0/s1600-h/image%25255B32%25255D.png"><img alt="image" border="0" height="388" src="http://lh3.ggpht.com/-SExgYA5lP0o/Un3vIao8ilI/AAAAAAAAFbA/-ivSdGAzfms/image_thumb%25255B10%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
加入subtree 的命令就成了：<br />
git subtree add --prefix=testing testing master --squash <br />
<a href="http://lh6.ggpht.com/-E0twcC_PEm8/Un3vJcDfs4I/AAAAAAAAFbI/S70AFkh63_A/s1600-h/image%25255B35%25255D.png"><img alt="image" border="0" height="388" src="http://lh4.ggpht.com/-uUi521RdoGM/Un3vJ-Mr_HI/AAAAAAAAFbQ/xDdiOGzf_po/image_thumb%25255B11%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
subtree pull 变成：<br />
git subtree pull --prefix=testing testing master --squash<br />
<a href="http://lh4.ggpht.com/-aXa1rAeH4VI/Un3vKpqU2hI/AAAAAAAAFbY/b11EV6Zfy3k/s1600-h/image%25255B38%25255D.png"><img alt="image" border="0" height="388" src="http://lh6.ggpht.com/-4tUtK5NPxQk/Un3vLWBnbmI/AAAAAAAAFbg/h-gkOTWbaYc/image_thumb%25255B12%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
<h2>【在subtreetest下更新testing，再push上】</h2>现在subtreetest 下更新 testing 目录下的文件<br />
<a href="http://lh6.ggpht.com/-Et7Rj9XvG6c/Un3vMNcw6II/AAAAAAAAFbo/hTId0CKkZQ4/s1600-h/image%25255B29%25255D.png"><img alt="image" border="0" height="764" src="http://lh6.ggpht.com/-KzWMicWxySY/Un3vM9NJojI/AAAAAAAAFbw/XhKE9etVRh4/image_thumb%25255B9%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="653" /></a> <br />
<br />
要push 回去的话：<br />
git subtree push --prefix=testing testing master    <br />
<a href="http://lh5.ggpht.com/-c-z7dzpH-LI/Un3vNQoucLI/AAAAAAAAFb4/B-HdztaegFY/s1600-h/image%25255B41%25255D.png"><img alt="image" border="0" height="388" src="http://lh5.ggpht.com/-eGJrnA_z0XM/Un3vOIcfKVI/AAAAAAAAFcA/7AfCzEYuXSk/image_thumb%25255B13%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="669" /></a> <br />
回到testing 下<br />
git pull<br />
就能看到更新了！<br />
<a href="http://lh5.ggpht.com/-BA9sA7XqUYE/Un3vlkClSbI/AAAAAAAAFcI/dmtDE1S_Vas/s1600-h/image%25255B44%25255D.png"><img alt="image" border="0" height="388" src="http://lh5.ggpht.com/-1tscRr3x1sM/Un3vmI4XHpI/AAAAAAAAFcc/Zo2UgxLpMb8/image_thumb%25255B14%25255D.png?imgmax=800" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="669" /></a> <br />
<br />
好了！<br />
